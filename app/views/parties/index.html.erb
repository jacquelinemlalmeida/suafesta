<h1 class="text-3xl font-extrabold text-purple-700 mb-6">ðŸŽŠ Minhas Festas</h1>

<table class="w-full table-auto border-collapse bg-white rounded-xl shadow overflow-hidden">
  <thead class="bg-pink-300 text-white">
    <tr>
      <th class="px-4 py-2 text-left">Nome do Aniversariante</th>
      <th class="px-4 py-2 text-left">Data</th>
      <th class="px-4 py-2 text-left">Total de Convidados</th>
    </tr>
  </thead>
  <tbody>
    <% @parties.each_with_index do |party, i| %>
      <% participants_count = party.participants.count %>
      <% guests_count = Guest.joins(:participant).where(participants: { party_id: party.id }).count %>

      <tr class="cursor-pointer <%= i.even? ? 'bg-yellow-50' : 'bg-pink-50' %>" onclick="window.location='<%= party_path(party) %>'">
        <td class="px-4 py-3 border-b border-purple-100 font-semibold text-purple-800">
          <%= party.birthday_person_name %>
        </td>
        <td class="px-4 py-3 border-b border-purple-100">
          <%= l(party.scheduled_at, format: :long) %>
        </td>
        <td class="px-4 py-3 border-b border-purple-100">
          <%= participants_count + guests_count %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
